{% for row in items_on_page %}
<style>
.form-popup {
 display: none;
 position: fixed;
 bottom: 0;
 right: 15px;
 border: 3px solid #f1f1f1;
 z-index: 9;
}

</style>





{% endfor %}
<script>
  $(document).ready(function() {
    $('#programTable').DataTable({
      
        dom: "<'row'<'col-sm-6'f><'col-sm-6'l>>" + 
     "<'row'<'col-sm-12'tr>>" +        
     "<'row mt-2'<'col-sm-6'i><'col-sm-6'p>>",
        "processing": true,
        "serverSide": true,
        "ajax": "/programs_data",
        "columns": [
        {"data" : 0},
        {"data" : 1},
        {"data" : 2},
        {"data":null,
          "orderable": false,
          "searchable": false,
          "render":function(data, type, row){
            return `
<div class="mt-3 mb-2">
  <button type="button" class="btn btn-primary edit-btn" data-bs-toggle="modal" data-bs-target="#editProgramModal-${row[0]}">
      Edit
  </button>
</div>
          <div class="modal fade"
     id="editProgramModal-${row[0]}"
     tabindex="-1"
     aria-labelledby="editProgramModalLabel-${row[0]}"
     aria-hidden="true">

  <div class="modal-dialog">
    <div class="modal-content">


      <div class="modal-header" style="background-color:#0d6efd;">
        <h5 class="modal-title text-white"
            id="editProgramModalLabel-${row[0]}">
          Edit Program
        </h5>
        <button type="button" class="btn-close btn-close-white"
                data-bs-dismiss="modal"></button>
      </div>

      <div class="modal-body">
        <form action="/p_update" method="post" id="editProgramForm-${row[0]}">

          <input type="hidden" name="program_id" value="${row[0]}">

          <div class="mb-3">
            <label class="form-label">Program Name</label>
            <input type="text"
                   class="form-control"
                   name="program_name"
                   value="${row[1]}"
                   required>
          </div>

          <div class="mb-3">
            <label class="form-label">College</label>
            <select class="form-select" name="college_in" required>
              {% for m in clg %}
                <option value="{{ m[0] }}"
                  ${row[2] == "{{ m[0] }}" ? "selected" : ""}>
                  {{ m[0] }}
                </option>
              {% endfor %}
            </select>
          </div>

        </form>
      </div>
      <div class="modal-footer">
        <button type="button"
                class="btn btn-secondary"
                data-bs-dismiss="modal">
          Cancel
        </button>

        <button type="button"
                class="btn btn-primary"
                form="editProgramForm-${row[0]}"
               data-bs-toggle="modal" data-bs-target="#confirmEditModal-${row[0]}">
          Update
        </button>
      </div>

    </div>
  </div>
</div>
<div class="modal fade" id="confirmEditModal-${row[0]}" tabindex="-1" aria-labelledby="confirmEditLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      
      <div class="modal-header">
        <h5 class="modal-title" id="confirmEditLabel">Confirm Submission</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      
      <div class="modal-body">
        Are you sure you want to edit this program?
      </div>
      
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
      
        <button type="submit" class="btn btn-primary" form="editProgramForm-${row[0]}" data-bs-dismiss="modal">Yes, edit</button>
      </div>
      
    </div>
  </div>
</div>
<input type="button" class="delete-btn btn btn-danger" 
       data-bs-toggle="modal" 
       data-bs-target="#confirmDeleteProgram-${row[0]}" 
       value="Delete">

<div class="modal fade" id="confirmDeleteProgram-${row[0]}" tabindex="-1" aria-labelledby="confirmDeleteProgram-${row[0]}" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      
      <div class="modal-header">
        <h5 class="modal-title" id="confirmDeleteProgram-${row[0]}">Confirm Submission</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
             <form action="/p_delete" method="post" id="deleteProgramForm-${row[0]}">
              <input type="hidden" name="program_id" value="${row[0]}" id="deleteProgramId-${row[0]}">
                    
      <div class="modal-body">
        Are you sure you want to delete this program?
      </div>
      
   <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
      
        <button type="submit" class="btn btn-danger" form="deleteProgramForm-${row[0]}" >Yes, Delete</button>
      </div>
    </form>
      
    </div>
  </div>
</div>        
            
        
          `
          }
        }]
      })});
</script>